$mining: (
  mining-deck: var(--state-new),
  never-forget-deck: var(--state-known),
  blacklist-deck: var(--state-blacklisted),
);

$grading: (
  nothing: var(--outline-v1-color),
  something: var(--outline-v1-color),
  hard: var(--outline-v3-color),
  okay: var(--outline-v4-color),
  easy: var(--outline-input-color),

  fail: var(--outline-v1-color),
  pass: var(--outline-v4-color),
);

$states: (
  locked: rgb(119, 119, 119),
  suspended: rgb(119, 119, 119),
  blacklisted: rgb(119, 119, 119),
  never-forget: rgb(112, 192, 0),
  not-in-deck: rgba(75, 141, 255),
  new: rgb(75, 141, 255),
  learning: rgb(94, 167, 128),
  known: rgb(112, 192, 0),
  due: rgb(255, 69, 0),
  failed: rgb(255, 0, 0),
);

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: rgba(155, 155, 155, 0.5);
  border-radius: 4px;
  border: transparent;
}

.popup {
  position: fixed;
  z-index: 2147483647;
  border-radius: 0.7rem;
  width: 350px;

  display: flex;
  flex-direction: column;
  gap: .5rem;

  margin: 0;
  padding: 1em;

  background-color: var(--background-color);
  box-shadow: 5px 5px 15px 0px rgba(0, 0, 0, 0.5);

  color: var(--text-color);

  &.animated {
    &.popup-visible {
      visibility: visible;
      opacity: 1;
      transition: opacity 60ms ease-in, visibility 60ms;
    }

    &.popup-hidden {
      visibility: hidden;
      opacity: 0;
      transition: opacity 200ms ease-in, visibility 200ms;
    }
  }

  section {
    &#mining, &#grading {
      display: flex;
      flex-direction: row;
      gap: .5rem;

      .button {
        background-color: var(--outline-input-background-color-review);
        transform: none;
        line-height: 0.7rem;
        height: 1.2rem;
        font-size: .7rem;
        padding: 0.5rem 0.5rem 0 0.5rem;

        &:hover {
          box-shadow: 0 1px 1px var(--button-shadow-color);
          filter: brightness(1.2);
        }

        &:active {
          filter: brightness(0.8);
        }
      }
    }

    &#mining {
      @each $id, $color in $mining {
        ##{$id} {
          color: $color;
          border-color: $color;
          box-shadow: 0 1px 1px $color;
        }
      }
    }

    &#grading {
      @each $id, $color in $grading {
        ##{$id} {
          color: $color;
          border-color: $color;
          box-shadow: 0 1px 1px $color;
        }
      }
    }

    &#context {
      #header {
        display: flex;
        flex-direction: row;
        justify-content: left;
        align-items: center;
        gap: 0.5em;

        margin: 0;
        padding: 0;

        font-size: 150%;

        a {
          color: var(--link-color);
          text-decoration: none;
          border-bottom: 1px solid var(--link-underline-color);

          &:hover {
            color: var(--link-color);
            text-decoration: none;
            border-bottom: 2px solid var(--link-color);
          }
        }

        .state {
          display: flex;
          flex-direction: column;
          margin-left: auto;

          font-size: 50%;
          line-height: 100%;
        }
      }

      #metainfo {
        display: flex;
        flex-direction: row;
        font-size: 12px;
        gap: 0.5em;
        white-space: nowrap;
        margin: 0.75em 0;

        .pitch {
          span {
            padding: 1px 1px 1px 2px;
            line-height: 1em;
            border-style: solid;
            border-image-slice: 2;
            border-image-source: linear-gradient(to bottom, rgba(232, 104, 123, 0.8), rgba(75, 141, 255, 0.8));
          }

          .low {
            border-width: 0 2px 2px 0;
            margin-right: -2px;
          }

          .high {
            border-width: 2px 2px 0 0;
            margin-right: -2px;
          }

          .low-final {
            border-width: 0 0 2px 0;
          }

          .high-final {
            border-width: 2px 0 0 0;
          }

          .low-final {
            border-width: 0 0 2px 0;
          }

          .high-final {
            border-width: 2px 0 0 0;
          }
        }
      }
    }

    &#details {
      overflow: auto;
      max-height: 130%;

      h2 {
        font-size: 120%;
        filter: brightness(85%) saturate(140%);
        padding-bottom: 0.5rem;
      }

      ol {
        margin: 0;
        padding: 0 0 1rem;
        padding-left: 1em;
      }
    }
  }

}
