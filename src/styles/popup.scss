@use 'variables/_colors' as colors;

@import 'theme/common';
@import 'theme/forms';
@import 'theme/outline';

.popup {
  all: initial;

  position: fixed;
  z-index: 2147483647;
  border-radius: 0.7rem;
  width: 350px;

  display: flex;
  flex-direction: column;
  gap: .5rem;

  margin: 0;
  padding: 1em;

  color: map-get(colors.$colors, text-color);
  background-color: map-get(colors.$colors, background-color);
  box-shadow: 5px 5px 15px 0px rgba(0, 0, 0, 0.5);

  &.animated {
    &.popup-visible {
      visibility: visible;
      opacity: 1;
      transition: opacity 60ms ease-in, visibility 60ms;
    }

    &.popup-hidden {
      visibility: hidden;
      opacity: 0;
      transition: opacity 200ms ease-in, visibility 200ms;
    }
  }

  section {
    &#mining, &#grading {
      display: flex;
      flex-direction: row;
      gap: .5rem;

      .outline {
        line-height: 0.7rem;
        height: 1.2rem;
        font-size: .7rem;
        padding: 0.5rem 0.5rem 0 0.5rem;

        &:hover {
          filter: brightness(1.2);
        }

        &:active {
          filter: brightness(0.8);
        }
      }
    }

    &#mining {
      @each $id, $color in colors.$decks {
        .#{$id} {
          color: $color;
          border-color: $color;
          box-shadow: inset 0 0 3px $color;
        }
      }
    }

    &#grading {
      @each $id, $color in colors.$grades {
        .#{$id} {
          color: $color;
          border-color: $color;
          box-shadow: inset 0 0 3px $color;
        }
      }
    }

    &#context {
      #header {
        display: flex;
        flex-direction: row;
        justify-content: left;
        align-items: center;
        gap: 0.5em;

        margin: 0;
        padding: 0;

        font-size: 150%;

        a {
          color: map-get(colors.$colors, link-color);
          text-decoration: none;
          border-bottom: 1px solid map-get(colors.$colors, link-underline-color);

          &:hover {
            color: map-get(colors.$colors, link-color);
            text-decoration: none;
            border-bottom: 2px solid map-get(colors.$colors, link-color);
          }
        }

        .state {
          display: flex;
          flex-direction: column;
          margin-left: auto;

          font-size: 50%;
          line-height: 100%;
        }
      }

      #metainfo {
        display: flex;
        flex-direction: row;
        font-size: 12px;
        gap: 0.5em;
        white-space: nowrap;
        margin: 0.75em 0;

        .pitch {
          span {
            padding: 1px 1px 1px 2px;
            line-height: 1em;
            border-style: solid;
            border-image-slice: 2;
            border-image-source: linear-gradient(to bottom, rgba(232, 104, 123, 0.8), rgba(75, 141, 255, 0.8));
          }

          .low {
            border-width: 0 2px 2px 0;
            margin-right: -2px;
          }

          .high {
            border-width: 2px 2px 0 0;
            margin-right: -2px;
          }

          .low-final {
            border-width: 0 0 2px 0;
          }

          .high-final {
            border-width: 2px 0 0 0;
          }

          .low-final {
            border-width: 0 0 2px 0;
          }

          .high-final {
            border-width: 2px 0 0 0;
          }
        }
      }
    }

    &#details {
      overflow: auto;
      max-height: 130px;

      h2 {
        font-size: 120%;
        filter: brightness(85%) saturate(140%);
        padding-bottom: 0.5rem;
      }

      ol {
        margin: 0;
        padding: 0 0 1rem;
        padding-left: 1em;
      }
    }
  }

}
